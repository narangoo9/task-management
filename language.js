

const translations = {
    mn: {
       
        dashboard: "Хяналтын Самбар",
        tracking: "Хянах",
        projects: "Төслүүд",
        workHistory: "Ажлын Түүх",
        inbox: "Ирэх Хайрцаг",
        settings: "Тохиргоо",
        tools: "Хэрэгслүүд",
        
        
        addTask: "ШИНЭ ДААЛГАВАР НЭМЭХ",
        addProject: "Шинэ Төсөл Нэмэх",
        edit: "Засах",
        delete: "Устгах",
        complete: "Дуусгах",
        check: "Check",
        backup: "Backup Татах",
        restore: "Backup Ачаалах",
        
       
        searchPlaceholder: "Даалгавар, төсөл хайх...",
        taskTitlePlaceholder: "Даалгаврын гарчиг оруулна уу",
        taskDescriptionPlaceholder: "Даалгаврын тайлбар оруулна уу",
        projectTitlePlaceholder: "Төслийн гарчиг оруулна уу",
        projectDescriptionPlaceholder: "Төслийн тайлбар оруулна уу",
        
       
        project: "Төсөл",
        taskTitle: "Даалгаврын Гарчиг",
        taskDescription: "Тайлбар",
        projectTitle: "Төслийн Гарчиг",
        projectDescription: "Тайлбар",
        startDate: "Эхлэх Огноо",
        endDate: "Дуусах Огноо",
        
       
        welcomeTitle: "Task manager дээрээ тавтай морил",
        welcomeText: "Энэ task нь таны өдөр тутамын амьдарлыг идэвхтэй болгож эрүүл амьдрахад тань тусална",
        learnMore: "Дэлгэрэнгүй",
        
       
        active: "Идэвхтэй",
        completed: "Дууссан",
        all: "Бүгд",
        
       
        noProjects: "Төсөл олдсонгүй",
        noProjectsText: "Шинэ төсөл нэмж эхлээрэй!",
        noTasks: "Хянах зүйл олдсонгүй",
        noTasksText: "Шинэ даалгавар эсвэл төсөл нэмээрэй!",
        noHistory: "Түүх олдсонгүй",
        noHistoryText: "Дууссан ажлууд энд харагдана.",
        noInbox: "Мэссэж байхгүй",
        noInboxText: "Шинэ мэссэж ирэхэд энд харагдана.",
        noSearchResults: "Хайлтын үр дүн олдсонгүй",
        noSearchResultsText: "гэсэн утгаар хайлт хийсэн боловч үр дүн олдсонгүй.",
        
        
        taskType: "Даалгавар",
        projectType: "Төсөл",
        
       
        taskAdded: "Шинэ даалгавар нэмэгдлээ",
        projectCompleted: "Төсөл дууслаа",
        errorAddingTask: "Даалгавар нэмэхэд алдаа гарлаа. Дахин оролдоно уу.",
        confirmDelete: "Та энэ даалгаврыг устгахдаа итгэлтэй байна уу?",
        confirmRestore: "Та backup файлаа ачаалахдаа итгэлтэй байна уу? Одоогийн task-ууд солигдоно.",
        backupDownloaded: "Backup файл амжилттай татагдлаа!",
        backupUploaded: "Backup файл амжилттай ачаалагдлаа!",
        backupError: "Backup файл ачаалахад алдаа гарлаа. Файлын формат буруу байна.",
        backupDownloadError: "Backup татахад алдаа гарлаа. Дахин оролдоно уу.",
        enterTaskTitle: "Даалгаврын гарчиг оруулна уу",
        enterProjectTitle: "Төслийн гарчиг оруулна уу",
        
        
        completed: "Дууссан",
        progress: "Дууссан",
        startDateLabel: "Эхлэх огноо:",
        endDateLabel: "Дуусах огноо:",
        
        
        chart: "График",
        week: "Долоо хоног",
        month: "Сар",
        projectsLabel: "Төслүүд",
        tasksLabel: "Даалгаврууд",
        taskProgress: "Даалгаврын Явц",
        timeSpent: "Зарцуулсан Цаг",
        lessonsLearned: "Сурсан Хичээл",
        passedExams: "Тэнцсэн Шалгалт",
        ongoingProjects: "Явж Байгаа Төслүүд",
        currentProjects: "Одоогийн Төслүүд",
        weekDays: ["Да", "Мя", "Лх", "Пү", "Ба", "Бя", "Ня"],
        
        
        profile: "Профайл",
        profileCompleted: "70% профайл бөглөсөн",
        success: "АМЖИЛТ",
        
       
        reminders: "Заавал санаж явах зүйлс",
        fitness: "Фитнесс",
        alwaysSmile: "Үргэлж инээмсэглэх",
        healthyDiet: "Эрүүл хоололт",
        healthyExercise: "Эрүүл дасгал хөдөлгөөн",
        perseverance: "Тэсвэр тэвчээр",
        beHappy: "Аз жаргалтай байна",
        investmentFuture: "Ирээдүйдээ оруулах хөрөнгө оруулалт",
        healthyBodyMind: "Эрүүл биед саруул ухаан",
        
        
        language: "Хэл",
        mongolian: "Монгол",
        english: "Англи"
    },
    en: {
        
        dashboard: "Dashboard",
        tracking: "Tracking",
        projects: "Projects",
        workHistory: "Work History",
        inbox: "Inbox",
        settings: "Settings",
        tools: "Tools",
        
       
        addTask: "ADD NEW TASK",
        addProject: "Add New Project",
        edit: "Edit",
        delete: "Delete",
        complete: "Complete",
        check: "Check",
        backup: "Download Backup",
        restore: "Upload Backup",
        
        
        searchPlaceholder: "Search tasks, projects...",
        taskTitlePlaceholder: "Enter task title",
        taskDescriptionPlaceholder: "Enter task description",
        projectTitlePlaceholder: "Enter project title",
        projectDescriptionPlaceholder: "Enter project description",
        
        
        project: "Project",
        taskTitle: "Task Title",
        taskDescription: "Description",
        projectTitle: "Project Title",
        projectDescription: "Description",
        startDate: "Start Date",
        endDate: "End Date",
        
      
        welcomeTitle: "Welcome to Task manager",
        welcomeText: "This task will help you stay active in your daily life and live a healthy life",
        learnMore: "Learn More",
        
        
        active: "Active",
        completed: "Completed",
        all: "All",
        
        noProjects: "No projects found",
        noProjectsText: "Start by adding a new project!",
        noTasks: "Nothing to track",
        noTasksText: "Add a new task or project!",
        noHistory: "No history found",
        noHistoryText: "Completed work will appear here.",
        noInbox: "No messages",
        noInboxText: "New messages will appear here.",
        noSearchResults: "No search results found",
        noSearchResultsText: "No results found for",
        
        
        taskType: "Task",
        projectType: "Project",
        
       
        taskAdded: "New task added",
        projectCompleted: "Project completed",
        errorAddingTask: "Error adding task. Please try again.",
        confirmDelete: "Are you sure you want to delete this task?",
        confirmRestore: "Are you sure you want to upload backup? Current tasks will be replaced.",
        backupDownloaded: "Backup file downloaded successfully!",
        backupUploaded: "Backup file uploaded successfully!",
        backupError: "Error uploading backup file. File format is incorrect.",
        backupDownloadError: "Error downloading backup. Please try again.",
        enterTaskTitle: "Please enter task title",
        enterProjectTitle: "Please enter project title",
        
       
        completed: "Completed",
        progress: "Completed",
        startDateLabel: "Start Date:",
        endDateLabel: "End Date:",
        
        
        chart: "Chart",
        week: "Week",
        month: "Month",
        projectsLabel: "Projects",
        tasksLabel: "Tasks",
        taskProgress: "Task Progress",
        timeSpent: "Time Spent",
        lessonsLearned: "Lessons Learned",
        passedExams: "Passed Exams",
        ongoingProjects: "Ongoing Projects",
        currentProjects: "Current Projects",
        weekDays: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
        
       
        profile: "Profile",
        profileCompleted: "70% profile completed",
        success: "SUCCESS",
        
       
        reminders: "Things to Remember",
        fitness: "Fitness",
        alwaysSmile: "Always Smile",
        healthyDiet: "Healthy Diet",
        healthyExercise: "Healthy Exercise",
        perseverance: "Perseverance",
        beHappy: "Be Happy",
        investmentFuture: "Investment in the future",
        healthyBodyMind: "Healthy body, healthy mind",
        
        
        language: "Language",
        mongolian: "Mongolian",
        english: "English"
    }
};


let currentLanguage = localStorage.getItem('language') || 'mn';


function t(key) {
    return translations[currentLanguage][key] || key;
}


function changeLanguage(lang) {
    currentLanguage = lang;
    localStorage.setItem('language', lang);
    document.documentElement.lang = lang;
    updateAllTexts();
}


function updateAllTexts() {
    
    const navItems = document.querySelectorAll('.nav-item span');
    if (navItems.length >= 4) {
        navItems[0].textContent = t('dashboard');
        navItems[1].textContent = t('tracking');
        navItems[2].textContent = t('projects');
        navItems[3].textContent = t('workHistory');
    }
    
    
    const toolsTitle = document.querySelector('.tools-section h3');
    if (toolsTitle) toolsTitle.textContent = t('tools');
    
    const inboxNav = document.querySelector('.tools-section .nav-item span');
    if (inboxNav && inboxNav.textContent.includes('Ирэх') || inboxNav.textContent.includes('Inbox')) {
        inboxNav.textContent = t('inbox');
    }
    
    const settingsNav = document.querySelectorAll('.tools-section .nav-item span')[1];
    if (settingsNav) settingsNav.textContent = t('settings');
    
    
    const addTaskBtn = document.getElementById('addTaskBtn');
    if (addTaskBtn) {
        const icon = addTaskBtn.querySelector('i');
        addTaskBtn.innerHTML = icon ? `<i class="${icon.className}"></i> ${t('addTask')}` : t('addTask');
    }
    
    const addProjectBtn = document.getElementById('addProjectBtn');
    if (addProjectBtn) {
        const icon = addProjectBtn.querySelector('i');
        addProjectBtn.innerHTML = icon ? `<i class="${icon.className}"></i> ${t('addProject')}` : t('addProject');
    }
    
   
    const pageTitle = document.getElementById('pageTitle');
    if (pageTitle) {
        const savedPage = stateManager ? stateManager.getState().currentPage : 'dashboard';
        const pageTitles = {
            'dashboard': t('dashboard'),
            'tracking': t('tracking'),
            'projects': t('projects'),
            'workHistory': t('workHistory'),
            'inbox': t('inbox')
        };
        pageTitle.textContent = pageTitles[savedPage] || t('dashboard');
    }
    
   
    const searchInput = document.getElementById('searchInput');
    if (searchInput) searchInput.placeholder = t('searchPlaceholder');
    
  
    const welcomeTitle = document.querySelector('.welcome-content h2');
    if (welcomeTitle) welcomeTitle.textContent = t('welcomeTitle');
    
    const welcomeText = document.querySelector('.welcome-content p');
    if (welcomeText) welcomeText.textContent = t('welcomeText');
    
    const learnMoreBtn = document.querySelector('.btn-learn-more');
    if (learnMoreBtn) learnMoreBtn.textContent = t('learnMore');
    
   
    const taskModalTitle = document.querySelector('#taskModal h2');
    if (taskModalTitle) taskModalTitle.textContent = currentLanguage === 'mn' ? 'Шинэ Даалгавар Нэмэх' : 'Add New Task';
    
    const projectModalTitle = document.querySelector('#projectModal h2');
    if (projectModalTitle) projectModalTitle.textContent = currentLanguage === 'mn' ? 'Шинэ Төсөл Нэмэх' : 'Add New Project';
    
   
    const taskTitleLabel = document.querySelector('#taskForm label[for="taskTitle"]');
    if (taskTitleLabel) taskTitleLabel.textContent = t('taskTitle');
    
    const taskDescLabel = document.querySelector('#taskForm label[for="taskDescription"]');
    if (taskDescLabel) taskDescLabel.textContent = t('taskDescription');
    
    const projectTitleLabel = document.querySelector('#projectForm label[for="projectTitle"]');
    if (projectTitleLabel) projectTitleLabel.textContent = t('projectTitle');
    
    const projectDescLabel = document.querySelector('#projectForm label[for="projectDescription"]');
    if (projectDescLabel) projectDescLabel.textContent = t('projectDescription');
    
    const startDateLabel = document.querySelector('#projectForm label[for="projectStartDate"]');
    if (startDateLabel) startDateLabel.textContent = t('startDate');
    
    const endDateLabel = document.querySelector('#projectForm label[for="projectEndDate"]');
    if (endDateLabel) endDateLabel.textContent = t('endDate');
    
    
    const taskTitleInput = document.getElementById('taskTitle');
    if (taskTitleInput) taskTitleInput.placeholder = t('taskTitlePlaceholder');
    
    const taskDescInput = document.getElementById('taskDescription');
    if (taskDescInput) taskDescInput.placeholder = t('taskDescriptionPlaceholder');
    
    const projectTitleInput = document.getElementById('projectTitle');
    if (projectTitleInput) projectTitleInput.placeholder = t('projectTitlePlaceholder');
    
    const projectDescInput = document.getElementById('projectDescription');
    if (projectDescInput) projectDescInput.placeholder = t('projectDescriptionPlaceholder');
    
  
    const taskSubmitBtn = document.querySelector('#taskForm button[type="submit"]');
    if (taskSubmitBtn) taskSubmitBtn.textContent = currentLanguage === 'mn' ? 'Даалгавар Нэмэх' : 'Add Task';
    
    const projectSubmitBtn = document.querySelector('#projectForm button[type="submit"]');
    if (projectSubmitBtn) projectSubmitBtn.textContent = currentLanguage === 'mn' ? 'Төсөл Нэмэх' : 'Add Project';
    
    
    const filterBtns = document.querySelectorAll('.filter-btn');
    if (filterBtns.length >= 3) {
        filterBtns[0].textContent = t('all');
        filterBtns[1].textContent = t('active');
        filterBtns[2].textContent = t('completed');
    }
    
    
    const trackingPageHeader = document.querySelector('#trackingPage .page-header h2');
    if (trackingPageHeader) trackingPageHeader.textContent = t('tracking');
    
    const trackingPageDesc = document.querySelector('#trackingPage .page-header p');
    if (trackingPageDesc) {
        trackingPageDesc.textContent = currentLanguage === 'en' ? 'Track task progress' : 'Даалгавруудын явцыг хянах';
    }
    
    
    const historyPageHeader = document.querySelector('#workHistoryPage .page-header h2');
    if (historyPageHeader) historyPageHeader.textContent = t('workHistory');
    
    const historyPageDesc = document.querySelector('#workHistoryPage .page-header p');
    if (historyPageDesc) {
        historyPageDesc.textContent = currentLanguage === 'en' ? 'History of completed work' : 'Дууссан ажлуудын түүх';
    }
    
    
    const historyFilter = document.getElementById('historyFilter');
    if (historyFilter && historyFilter.options.length >= 4) {
        historyFilter.options[0].text = currentLanguage === 'en' ? 'All history' : 'Бүх түүх';
        historyFilter.options[1].text = currentLanguage === 'en' ? 'Today' : 'Өнөөдөр';
        historyFilter.options[2].text = currentLanguage === 'en' ? 'This week' : 'Энэ долоо хоног';
        historyFilter.options[3].text = currentLanguage === 'en' ? 'This month' : 'Энэ сар';
    }
    
    
    const projectsPageHeader = document.querySelector('#projectsPage .page-header h2');
    if (projectsPageHeader) projectsPageHeader.textContent = t('projects');
    
    const projectsPageDesc = document.querySelector('#projectsPage .page-header p');
    if (projectsPageDesc) {
        projectsPageDesc.textContent = currentLanguage === 'en' ? 'Manage all projects' : 'Бүх төслүүдийг удирдах';
    }
    
   
    const inboxPageHeader = document.querySelector('#inboxPage .page-header h2');
    if (inboxPageHeader) inboxPageHeader.textContent = t('inbox');
    
    const inboxPageDesc = document.querySelector('#inboxPage .page-header p');
    if (inboxPageDesc) {
        inboxPageDesc.textContent = currentLanguage === 'en' ? 'Messages and notifications' : 'Ирсэн мэссэж, мэдэгдлүүд';
    }
    
   
    const chartTitle = document.querySelector('.chart-card h3');
    if (chartTitle) chartTitle.textContent = t('chart');
    
    const currencyFilter = document.getElementById('currencyFilter');
    if (currencyFilter && currencyFilter.options.length >= 2) {
        currencyFilter.options[0].text = t('week');
        currencyFilter.options[1].text = t('month');
    }
    
    
    const summaryLabels = document.querySelectorAll('.summary-label');
    if (summaryLabels.length >= 2) {
        summaryLabels[0].textContent = t('projectsLabel');
        summaryLabels[1].textContent = t('tasksLabel');
    }
    
    
    const taskProgressTitle = document.querySelector('.progress-chart-card h3');
    if (taskProgressTitle) taskProgressTitle.textContent = t('taskProgress');
    
    const progressFilter = document.querySelector('.progress-chart-card .chart-filter');
    if (progressFilter && progressFilter.options.length >= 2) {
        progressFilter.options[0].text = t('week');
        progressFilter.options[1].text = t('month');
    }
    
    
    const weekDaySpans = document.querySelectorAll('.progress-bar-item span');
    const weekDays = translations[currentLanguage].weekDays;
    if (weekDaySpans.length >= 7 && weekDays) {
        weekDaySpans.forEach((span, index) => {
            if (index < weekDays.length) {
                span.textContent = weekDays[index];
            }
        });
    }
    
    
    const progressDetailHeaders = document.querySelectorAll('.progress-detail-header span:first-child');
    if (progressDetailHeaders.length >= 3) {
        progressDetailHeaders[0].textContent = t('timeSpent');
        progressDetailHeaders[1].textContent = t('lessonsLearned');
        progressDetailHeaders[2].textContent = t('passedExams');
    }
    
    
    const ongoingProjectsTitle = document.querySelector('.ongoing-projects h3');
    if (ongoingProjectsTitle) ongoingProjectsTitle.textContent = t('ongoingProjects');
    
    
    const currentProjectsTitle = document.querySelector('.current-projects-section h3');
    if (currentProjectsTitle) currentProjectsTitle.textContent = t('currentProjects');
    
    
    const profileTitle = document.querySelector('.right-profile-section h3');
    if (profileTitle) profileTitle.textContent = t('profile');
    
    const profileCompletion = document.querySelector('.profile-completion span');
    if (profileCompletion) profileCompletion.textContent = t('profileCompleted');
    
    const profileNameRight = document.querySelector('.profile-name-right');
    if (profileNameRight) profileNameRight.textContent = t('success');
    
    const remindersTitle = document.querySelector('.messages-section h3');
    if (remindersTitle) remindersTitle.textContent = t('reminders');
    
    
    const reminderMessages = document.querySelectorAll('.messages-list .message-name');
    if (reminderMessages.length >= 4) {
        reminderMessages[0].textContent = t('fitness');
        reminderMessages[1].textContent = t('alwaysSmile');
        reminderMessages[2].textContent = t('healthyDiet');
        reminderMessages[3].textContent = t('healthyExercise');
    }
    
    const reminderTexts = document.querySelectorAll('.messages-list .message-text');
    if (reminderTexts.length >= 4) {
        reminderTexts[0].textContent = t('perseverance');
        reminderTexts[1].textContent = t('beHappy');
        reminderTexts[2].textContent = t('investmentFuture');
        reminderTexts[3].textContent = t('healthyBodyMind');
    }
    
    
    if (typeof renderProjects === 'function') renderProjects();
    if (typeof renderAllProjects === 'function') renderAllProjects();
    if (typeof renderTracking === 'function') renderTracking();
    if (typeof renderWorkHistory === 'function') renderWorkHistory();
    if (typeof renderInbox === 'function') renderInbox();
}


document.addEventListener('DOMContentLoaded', () => {
    
    const languageSelect = document.getElementById('languageSelect');
    if (languageSelect) {
        languageSelect.value = currentLanguage;
        
        
        languageSelect.addEventListener('change', (e) => {
            changeLanguage(e.target.value);
        });
    }
    
    
    changeLanguage(currentLanguage);
});

